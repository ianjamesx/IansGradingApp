<!DOCTYPE html>
<html lang="en">

    <head>
        <%- include('../partials/head', { title: "Gradux.io" }) %>
    </head>

  <body>

  <nav class="navbar navbar-default navbar-expand-lg fixed-top custom-navbar">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="icon ion-md-menu"></span>
    </button>
    <img src="/logo.png" class="img-fluid nav-logo-mobile" alt="Ian's App Logo">
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <div class="container">
      	<img src="/logo.png" class="img-fluid nav-logo-desktop" alt="Ian's App Logo">
        <ul class="navbar-nav ml-auto nav-right" data-easing="easeInOutExpo" data-speed="1250" data-offset="65">
          <li class="nav-item nav-custom-link">
            <a class="nav-link" href="#about">About<i class="icon ion-ios-arrow-forward icon-mobile"></i></a>
          </li>
          <li class="nav-item nav-custom-link">
            <a class="nav-link" href="#about">Try It<i class="icon ion-ios-arrow-forward icon-mobile"></i></a>
          </li>
          <li class="nav-item nav-custom-link">
            <a class="nav-link" href="#contact">Contact<i class="icon ion-ios-arrow-forward icon-mobile"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <section id="hero">
    <div class="container">
      <div class="col-md-7 content-box hero-content">
        <h1>Welcome to <br><b>Ian's Grading App</b></h1>
        <span style="display:block; height: 20px;"></span>
        <h4>Sign in here for students and instructors</h4>
        <span style="display:block; height: 10px;"></span>
        <div class="row">
         <div class="col-sm-6">
          <form>
            <div class="form-group">
              <input type="TEXT" class="form-control" id="username" placeholder="Username or Email">
            </div>
            <div class="form-group">
              <input type="password" class="form-control" id="password" placeholder="Password">
            </div>
            <button id="submit" type="button" class="appbtn">Sign In</button>
          </form>
        </div>
        <div class="col-sm-8">
          <div id="loginAlert"></div>
          <h4>Don't have an account?</h4>
          <button id="createAccount" type="button" class="appbtn" data-toggle="modal" data-target="#createModal">Create Account</button>
        </div>
      </div>
    </div>
  </section>

  <section id="about">
    <div class="container">
      <div class="row">
        <div class="col-md-5">
          <div class="content-box">
            <span>Efficient, Functional, and User-Friendly</span>
            <span style="display:block; height: 10px;"></span>
            <h2>A Better Way To Do Online Courses</h2>
            <span style="display:block; height: 10px;"></span>
            <p>With a simple interface, functional design, Ian's Grading App is an easy way to do online course work, and to handle your course's grades</p>
            <span style="display:block; height: 20px;"></span>
            <button class="appbtn">Learn More</button>
            <span style="display:block; height: 20px;"></span>
            <button class="appbtn">Try Now In Your Browser</button>
          </div>
        </div>
        <div class="col-md-7">
            <img src="client/img/sample1.png" class="img-thumbnail" alt="Demo UI">
        </div>
      </div>
    </div>
  </section>

  <section id="contact">
      <div class="container">
        <div class="title-block">
          <h2>Interested in Ian's Grading App?</h2>
          <p>Fill out our contact form, and we'll help get you started</p>
          <span style="display:block; height: 40px;"></span>
          <div id="infosent"></div>
          <span style="display:block; height: 10px;"></span>
          <form>
            <div class="form-row">
              <div class="col">
                <input type="text" class="form-control" id="contactname" placeholder="Your Full Name">
                <small id="namehelp" class="text-danger"></small>
              </div>
              <div class="col">
                <input type="text" class="form-control" id="contactemail" placeholder="Your Email">
                <small id="emailhelp" class="text-danger"></small>
              </div>
            </div>
            <span style="display:block; height: 20px;"></span>
            <div class="form-row">
              <div class="col">
                <input type="text" class="form-control" id="university" placeholder="University Affiliation">
                <small id="universityhelp" class="text-danger"></small>
              </div>
              <div class="col">
                <input type="text" class="form-control" id="subjectarea"  placeholder="Subject Area of Your Class">
                <small id="subjecthelp" class="text-danger"></small>
              </div>
            </div>
            <span style="display:block; height: 20px;"></span>
            <textarea class="form-control" rows="5" id="comment" placeholder="Any other questions or comments?"></textarea>
            <span style="display:block; height: 40px;"></span>
            <button id="sendinfo" type="button" class="appbtn">Submit Info</button>
          </form>
        </div>
      </div>
    </section>

    <section id="info">
        <div class="container">
          <div class="title-block">
            <h2>App Support</h2>
            <span style="display:block; height: 40px;"></span>
            <button onclick="window.location='/tutorial'" class="appbtn">Click here for a tutorial on using the app</button>
          </div>
        </div>
      </section>

    <footer>
      <div class="container">
        <h4>Copyright Ian's Grading App 2018</h4>
        <h4>Email: info@ianapp.com</h4>
      </div>
    </footer>

    <div class="modal fade" id="createModal" role="dialog">
      <div class="modal-dialog modal-dialog-centered modal-md">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">Create An Account</h2>
          </div>
          <div class="modal-body">
            <p>Please fill out the following fields.<br>Click 'Create Account' when you are done.</p>

            <div class="form-row">
              <div class="form-group col-md-10">
                <label>I am a(n):</label>
                <select id="standing" class="form-control">
                  <option value="0" selected>Student</option>
                  <option value="1">Instructor</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-10">
                <input type="TEXT" class="form-control" id="newUsername" placeholder="Username">
                <small id="usernameHelp" class="text-danger"></small>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-10">
                <input type="email" class="form-control" id="email" placeholder="Email">
                <small id="emailHelp" class="text-danger"></small>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-10">
                <input type="TEXT" class="form-control" id="firstname" placeholder="First Name">
                <small id="firstnameHelp" class="text-danger"></small>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-10">
                <input type="TEXT" class="form-control" id="lastname" placeholder="Last Name">
                <small id="lastnameHelp" class="text-danger"></small>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-10">
                <input type="password" class="form-control" id="newPassword" placeholder="Password">
                <small id="passwordHelp" class="text-danger"></small>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-10">
                <input type="password" class="form-control" id="confirmpass" placeholder="Retype Password">
              </div>
            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="appbtn" id="newAccountInfo">Create Account</button>
          </div>
        </div>
      </div>
    </div>

  </body>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>

  <script>

    $(document).ready(function(){

      //logging in

      $("#submit").click(function(){

        $.ajax({

          url: '/login',
          type: 'POST',
          data: {

            user: $("#username").val(),
            password: $("#password").val()

          },

          datatype: 'json',
          success: function(data){

            if(data.userRecognized){

              location.href='/dashboard';

            } else {

              $('#loginAlert').append('<div class="alert alert-danger alert-dismissible fade show" role="alert">' +
                 'username or password not recognized' +
                '<button type="button" class="close" data-dismiss="alert" aria-label="Close">' +
                  '<span aria-hidden="true">&times;</span>' +
                '</button>' +
              '</div>');

            }

          }

        });

      });

      //creating account

      $("#newAccountInfo").click(function(){

        $.ajax({

          url: '/createaccount',
          type: 'POST',
          data: {

            instructor: $("#standing").val(),
            username: $("#newUsername").val(),
            email: $("#email").val(),
            firstname: $("#firstname").val(),
            lastname: $("#lastname").val(),
            password: $("#newPassword").val(),
            confirmpass: $("#confirmpass").val(),

          },

          datatype: 'json',
          success: function(data){

            console.log(data);

            if(data.verified){

              //redirect to welcome page

              location.href='/dashboard';

              //alert user if username or email (or both) are taken

            } else {

              $("#usernameHelp").text(data.usernameResponse);
              $("#emailHelp").text(data.emailResponse);
              $("#firstnameHelp").text(data.firstResponse);
              $("#lastnameHelp").text(data.lastResponse);
              $("#passwordHelp").text(data.passResponse);

            }

          }

        });

      });

      //sending contact info

      $("#sendinfo").click(function(){

        $('#infosent').html('');

        $.ajax({

          url: '/contact',
          type: 'POST',
          data: {

            name: $("#contactname").val(),
            email: $("#contactemail").val(),
            university: $("#university").val(),
            subject: $("#subjectarea").val(),
            comment: $("#comment").val()

          },

          datatype: 'json',
          success: function(data){

            if(data.success){

              $('#infosent').html('<div class="alert alert-success"><span>Thanks! Your info has been sent. We will be in touch soon</span></div>');

              $('#contactname').val('');
              $('#contactemail').val('');
              $('#university').val('');
              $('#subjectarea').val('');
              $('#comment').val('');

              //clear all red text fields

              $("#namehelp").text('');
              $("#emailhelp").text('');
              $("#universityhelp").text('');
              $("#subjecthelp").text('');

            } else {

              $("#namehelp").text(data.name);
              $("#emailhelp").text(data.email);
              $("#universityhelp").text(data.university);
              $("#subjecthelp").text(data.subject);

            }

          }

        });

      });

    });

  </script>

</html>